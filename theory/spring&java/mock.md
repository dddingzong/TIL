## Mock 객체

<hr>

### 서론

테스트를 진행하다보면 mock 관련 코드를 접할 수 있다. 아직 테스트 코드를 완벽하게 작성하지는 못하지만 이후 프로젝트에서 TDD를 진행할 예정이기 때문에 미리 공부하도록 하자.

<hr>

### mock 이란?

> * 실제 객체의 동작을 흉내 낸 가짜 객체
> * 주로 단위 테스트 시, 의존 객체의 실제 구현을 사용하지 않고 행동만 모의하여 테스트의 독립성과 속도를 확보
> * 테스트 중인 클래스와 의존 관계에 있는 객체의 행위만을 통제하며, 외부 시스템과의 상호작용 없이 테스트 가능
> * WebApploicatonContext를 로드하며 내장된 서블릿 컨텐이너가 아닌 Mock 서블릿을 제공
> * @AutoConfigureMockMvc 어노테이션을 함께 사용하면 별다른 설정 없이 간편하게 MockMvc를 사용한 테스트를 진행 가능

<hr>

### Mock 객체는 언제 사용하는가
* 테스트 작성을 위한 환경 구축이 어려운 경우
* 테스트가 특정 경우나 순간에 의존적인 경우
* 테스트 시간이 오래 걸리는 경우
* 개인 PC의 성능이나 서버의 성능문제가 발생할 수 있는 경우

<hr>

### TestDouble

![testDouble.png](..%2Fimage%2FmockObject%2FtestDouble.png)

* 테스트 더블은 테스트에서 실제 객체를 대체하기 위해 사용하는 모든 가짜 객체를 포괄하는 개념
* 실제 객체가 갖는 복잡성, 외부 의존성, 성능 문제 등을 회피하면서 테스트를 단순하고 안정적으로 만들 수 있게한다.
* Mock Object를 사용한 테스트만 행위 기반 테스트이며, 나머지는 상태 기반 테스트이다.

<hr>

#### Dummy Object
* 실제로는 사용되지 않지만, 메서드 호출 시 인자로 전달되는 객체
* 테스트에서 호출되지 않으며, 보통 null 대신 넣는다.

#### Test Stub
* 특정 상황에 대해 미리 정의된 응답을 제공하는 객체
* 테스트 대상 코드가 의존 객체를 통해 값을 받을 때, 필요한 동작만 제한적으로 흉내낸다.

#### Test Spy
* 일부 동작만 Mock처럼 흉내내고 나머지는 실제 구현을 사용
* 기존 클래스의 실제 메서드 실행 결과를 확인하면서 특정 메서드만 Stub 처리할 때 유용하다.

#### Mock Object
* 메서드 호출 횟수, 순서, 파라미터 등과 같은 행위를 검증할 수 있도록 만든 객체
* 실제 로직은 수행하지 않으며, 협력 객체와의 상호작용을 테스트하는 데 초점을 둔다.

#### Fake Object
* 실제 동작은 하지만 단순화된 버전으로 구현된 객체
* 외부 시스템 의존을 제거할 수 있어 통합 테스트에 유용하다.

<hr>

### Mockito
* Java 단위 테스트에서 Mock 객체를 생성하고 동작을 설정하고 검증하는 기능을 제공하는 프레임워크

<hr>

### 결론

프로젝트를 진행하면서 몇 번 사용한적이 있는데, 제대로 알지도 못하면서 사용했었다.

기술 사용할 때는 제발 공부를 먼저하자, 그냥 GPT가 주는데로 코드를 작성하는건 의미가 없다. 

